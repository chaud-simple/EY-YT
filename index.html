<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ‡°ğŸ‡· Korea Travel Card Maker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;800&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Noto Sans KR', 'Segoe UI', sans-serif; background: #F7F5F0; }
    input, textarea, button { font-family: inherit; }
    input:focus, textarea:focus { border-color: #E8572A !important; outline: none; }
    .fade { animation: fadeIn 0.3s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    @media (max-width: 720px) {
      .layout { flex-direction: column !important; }
      .desktop-preview { display: none !important; }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useRef } = React;

    const CATS = [
      { label: "ğŸœ Restaurant", value: "restaurant", color: "#E8572A" },
      { label: "â˜• CafÃ©",        value: "cafe",       color: "#8B5E3C" },
      { label: "ğŸ¯ Attraction",  value: "attraction", color: "#2A6EE8" },
      { label: "ğŸ›ï¸ Shopping",   value: "shopping",   color: "#9B2AE8" },
      { label: "ğŸŒ¸ Nature",      value: "nature",     color: "#2AAE5A" },
      { label: "ğŸº Bar / Night", value: "bar",        color: "#1A1A2E" },
    ];

    const THEMES = [
      { id:"bright", label:"â˜€ï¸ Bright",      bg:"#FFFDF7", accent:"#E8572A", text:"#1A1A1A", sub:"#6B6B6B" },
      { id:"seoul",  label:"ğŸŒƒ Seoul Night", bg:"#0D0D1A", accent:"#FF6B9D", text:"#F0F0FF", sub:"#9090B0" },
      { id:"hanok",  label:"ğŸ˜ï¸ Hanok",       bg:"#F5EFE0", accent:"#8B4513", text:"#2C1810", sub:"#7A6355" },
    ];

    function Card({ data, theme, cardRef }) {
      const cat = CATS.find(c => c.value === data.category) || CATS[0];
      const t   = THEMES.find(t => t.id === theme) || THEMES[0];
      const stars = data.rating
        ? "â˜…".repeat(parseInt(data.rating)) + "â˜†".repeat(5 - parseInt(data.rating))
        : "";

      return (
        <div ref={cardRef} style={{
          width:540, minHeight:300, background:t.bg, borderRadius:20, overflow:"hidden",
          fontFamily:"'Noto Sans KR','Segoe UI',sans-serif",
          boxShadow:"0 20px 60px rgba(0,0,0,0.25)",
        }}>
          {/* â”€â”€ header â”€â”€ */}
          <div style={{ background:cat.color, padding:"22px 28px 18px" }}>
            <div style={{
              display:"inline-block", background:"rgba(255,255,255,0.25)", color:"#fff",
              fontSize:11, fontWeight:700, letterSpacing:"1.5px", textTransform:"uppercase",
              padding:"4px 12px", borderRadius:20, marginBottom:8,
            }}>{cat.label}</div>
            <h2 style={{ color:"#fff", fontSize:26, fontWeight:800, margin:"0 0 4px", lineHeight:1.2, textShadow:"0 2px 8px rgba(0,0,0,0.2)" }}>
              {data.name || "Place Name"}
            </h2>
            {data.koreanName && <p style={{ color:"rgba(255,255,255,0.8)", fontSize:15, margin:0 }}>{data.koreanName}</p>}
          </div>

          {/* â”€â”€ body â”€â”€ */}
          <div style={{ padding:"20px 28px 20px" }}>
            {data.description && (
              <p style={{ color:t.text, fontSize:14, lineHeight:1.7, marginBottom:16, fontStyle:"italic", opacity:0.85 }}>
                "{data.description}"
              </p>
            )}
            <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:12, marginBottom:14 }}>
              {[
                ["ğŸ“ Location", "address"],
                ["ğŸ• Hours",    "hours"],
                ["ğŸ’° Price",    "price"],
                ["ğŸš‡ Subway",   "subway"],
              ].map(([lbl, key]) => data[key] ? (
                <div key={key}>
                  <div style={{ fontSize:10, fontWeight:700, letterSpacing:"1.2px", textTransform:"uppercase", color:t.sub }}>{lbl}</div>
                  <div style={{ fontSize:13, color:t.text, fontWeight:500, marginTop:2 }}>{data[key]}</div>
                </div>
              ) : null)}
            </div>
            {data.tip && (
              <div style={{
                background: theme==="seoul" ? "rgba(255,107,157,0.12)" : theme==="hanok" ? "rgba(139,69,19,0.1)" : "rgba(232,87,42,0.08)",
                border:`1.5px solid ${cat.color}33`, borderLeft:`4px solid ${cat.color}`,
                borderRadius:8, padding:"10px 14px",
              }}>
                <div style={{ fontSize:10, fontWeight:700, letterSpacing:"1px", textTransform:"uppercase", color:cat.color, marginBottom:3 }}>âœ¨ Tip</div>
                <div style={{ fontSize:13, color:t.text, lineHeight:1.5 }}>{data.tip}</div>
              </div>
            )}
          </div>

          {/* â”€â”€ footer â”€â”€ */}
          <div style={{
            display:"flex", justifyContent:"space-between", alignItems:"center",
            padding:"10px 28px",
            borderTop:`1px solid ${theme==="seoul" ? "rgba(255,255,255,0.08)" : "rgba(0,0,0,0.07)"}`,
          }}>
            <span style={{ fontSize:11, color:t.sub, fontWeight:600 }}>{data.channel || "Korea Travel Vlog"}</span>
            {stars && <span style={{ color:"#FFB800", fontSize:14, letterSpacing:1 }}>{stars}</span>}
          </div>
        </div>
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN APP
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function App() {
      const [step,   setStep]   = useState(1);
      const [theme,  setTheme]  = useState("bright");
      const [genning, setGen]   = useState(false);
      const [dlding,  setDl]    = useState(false);
      const [mPreview,setMP]    = useState(false);
      const [data,   setData]   = useState({
        name:"", koreanName:"", category:"restaurant",
        description:"", address:"", hours:"",
        price:"", subway:"", tip:"", rating:"4", channel:"",
      });
      const cardRef = useRef(null);
      const set = (f,v) => setData(p => ({ ...p, [f]:v }));

      /* auto-write description */
      async function autoWrite() {
        if (!data.name) return;
        setGen(true);
        try {
          const r = await fetch("https://api.anthropic.com/v1/messages", {
            method:"POST",
            headers:{ "Content-Type":"application/json" },
            body:JSON.stringify({
              model:"claude-sonnet-4-20250514",
              max_tokens:200,
              messages:[{ role:"user", content:
                `Write a SHORT, warm, inviting 1-2 sentence English description for a Korean travel YouTube info card.
Place: ${data.name}${data.koreanName ? ` (${data.koreanName})` : ""}
Type: ${data.category}${data.tip ? `\nNotes: ${data.tip}` : ""}
Under 30 words. No hashtags. First-person tone like you visited.` }],
            }),
          });
          const j = await r.json();
          const txt = j.content?.[0]?.text?.trim().replace(/^["']|["']$/g,"");
          if (txt) set("description", txt);
        } catch { alert("Couldn't auto-write right now. Check internet and try again!"); }
        setGen(false);
      }

      /* download */
      async function download() {
        if (!cardRef.current) return;
        setDl(true);
        try {
          const canvas = await html2canvas(cardRef.current, { scale:3, backgroundColor:null, useCORS:true, logging:false });
          const a = document.createElement("a");
          a.download = `${(data.name||"card").replace(/\s+/g,"-")}.png`;
          a.href = canvas.toDataURL("image/png");
          a.click();
        } catch { alert("Download failed, please try again!"); }
        setDl(false);
      }

      /* shared styles */
      const inp = { width:"100%", padding:"12px 14px", borderRadius:10, border:"2px solid #E8E8E8", fontSize:15, background:"#fff" };
      const lbl = { display:"block", fontSize:13, fontWeight:700, color:"#444", marginBottom:6 };
      const bigBtn = (bg, color, disabled=false) => ({
        padding:"14px 20px", borderRadius:12, border:"none", width:"100%",
        fontSize:16, fontWeight:700, cursor: disabled ? "not-allowed" : "pointer",
        background: disabled ? "#ccc" : bg, color, transition:"opacity 0.2s",
      });

      return (
        <div style={{ minHeight:"100vh" }}>

          {/* header */}
          <div style={{ background:"#E8572A", padding:"18px 24px", textAlign:"center" }}>
            <h1 style={{ color:"#fff", fontSize:22, fontWeight:800 }}>ğŸ‡°ğŸ‡· Korea Travel Card Maker</h1>
            <p style={{ color:"rgba(255,255,255,0.85)", fontSize:13, marginTop:4 }}>Make beautiful info cards for your YouTube videos!</p>
          </div>

          {/* step tabs */}
          <div style={{ display:"flex", justifyContent:"center", padding:"18px 16px 0" }}>
            {["1. Fill Info","2. Pick Style","3. Download"].map((s,i) => (
              <div key={i} style={{ display:"flex", alignItems:"center" }}>
                <div onClick={() => setStep(i+1)} style={{
                  padding:"8px 14px", borderRadius:20, cursor:"pointer", whiteSpace:"nowrap",
                  background: step===i+1 ? "#E8572A" : step>i+1 ? "#2AAE5A" : "#E0E0E0",
                  color: step>=i+1 ? "#fff" : "#888", fontSize:13, fontWeight:700,
                }}>
                  {step>i+1 ? "âœ“ ":""}{s}
                </div>
                {i<2 && <div style={{ width:16, height:2, background: step>i+1 ? "#2AAE5A" : "#E0E0E0" }} />}
              </div>
            ))}
          </div>

          {/* layout */}
          <div className="layout" style={{ maxWidth:1100, margin:"0 auto", padding:"20px 16px 60px", display:"flex", gap:24, alignItems:"flex-start" }}>

            {/* â”€â”€ form panel â”€â”€ */}
            <div style={{ flex:1, minWidth:300 }}>
              <div className="fade" key={step} style={{ background:"#fff", borderRadius:16, padding:24, boxShadow:"0 4px 20px rgba(0,0,0,0.07)" }}>

                {/* STEP 1 */}
                {step===1 && <>
                  <h2 style={{ fontSize:18, marginBottom:20 }}>ğŸ“ Step 1: Tell us about the place</h2>

                  {/* category */}
                  <div style={{ marginBottom:16 }}>
                    <label style={lbl}>Category *</label>
                    <div style={{ display:"flex", flexWrap:"wrap", gap:8 }}>
                      {CATS.map(cat => (
                        <button key={cat.value} onClick={() => set("category", cat.value)} style={{
                          padding:"8px 14px", borderRadius:20, border:"2px solid",
                          borderColor: data.category===cat.value ? cat.color : "#E0E0E0",
                          background:  data.category===cat.value ? cat.color : "#fff",
                          color:       data.category===cat.value ? "#fff"     : "#555",
                          fontSize:13, fontWeight:600, cursor:"pointer",
                        }}>{cat.label}</button>
                      ))}
                    </div>
                  </div>

                  {/* fields */}
                  {[
                    ["Place Name (English) *", "name",       "text", "e.g. Gyeongbokgung Palace"],
                    ["Korean Name (optional)", "koreanName", "text", "e.g. ê²½ë³µê¶"],
                    ["Your Channel Name",      "channel",    "text", "e.g. Mom's Korea Travel"],
                  ].map(([label, field, type, ph]) => (
                    <div key={field} style={{ marginBottom:14 }}>
                      <label style={lbl}>{label}</label>
                      <input style={inp} type={type} placeholder={ph} value={data[field]} onChange={e => set(field, e.target.value)} />
                    </div>
                  ))}

                  {/* description + auto-write */}
                  <div style={{ marginBottom:8 }}>
                    <label style={lbl}>Description</label>
                    <textarea style={{ ...inp, resize:"vertical", minHeight:72 }}
                      placeholder="Write something, or use the button below to auto-write it!"
                      value={data.description} onChange={e => set("description", e.target.value)} />
                  </div>
                  <button onClick={autoWrite} disabled={genning||!data.name} style={{ ...bigBtn("#2A6EE8","#fff", genning||!data.name), marginBottom:16 }}>
                    {genning ? "âœ¨ Writing..." : "âœ¨ Auto-write description for me!"}
                  </button>

                  {/* 2-col info */}
                  <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:12, marginBottom:14 }}>
                    {[
                      ["ğŸ“ Area / Location","address","e.g. Jongno-gu, Seoul"],
                      ["ğŸ• Opening Hours",  "hours",  "e.g. 9am â€“ 6pm daily"],
                      ["ğŸ’° Price Range",    "price",  "e.g. â‚©10,000â€“20,000"],
                      ["ğŸš‡ Nearest Subway", "subway", "e.g. Gyeongbokgung Stn."],
                    ].map(([label,field,ph]) => (
                      <div key={field}>
                        <label style={lbl}>{label}</label>
                        <input style={inp} placeholder={ph} value={data[field]} onChange={e => set(field, e.target.value)} />
                      </div>
                    ))}
                  </div>

                  {/* tip */}
                  <div style={{ marginBottom:16 }}>
                    <label style={lbl}>âœ¨ Your Personal Tip</label>
                    <input style={inp} placeholder="e.g. Go early morning to avoid crowds!" value={data.tip} onChange={e => set("tip", e.target.value)} />
                  </div>

                  {/* rating */}
                  <div style={{ marginBottom:24 }}>
                    <label style={lbl}>â­ Your Rating</label>
                    <div style={{ display:"flex", gap:8 }}>
                      {[1,2,3,4,5].map(n => (
                        <button key={n} onClick={() => set("rating", String(n))} style={{
                          width:44, height:44, borderRadius:10, border:"2px solid",
                          borderColor: parseInt(data.rating)>=n ? "#FFB800" : "#E0E0E0",
                          background:  parseInt(data.rating)>=n ? "#FFF8E1" : "#fff",
                          fontSize:22, cursor:"pointer",
                        }}>â˜…</button>
                      ))}
                    </div>
                  </div>

                  <button onClick={() => setStep(2)} style={bigBtn("#E8572A","#fff")}>Next: Pick a Style â†’</button>
                </>}

                {/* STEP 2 */}
                {step===2 && <>
                  <h2 style={{ fontSize:18, marginBottom:20 }}>ğŸ¨ Step 2: Pick a card style</h2>
                  <div style={{ display:"flex", flexDirection:"column", gap:12, marginBottom:24 }}>
                    {THEMES.map(t => (
                      <button key={t.id} onClick={() => setTheme(t.id)} style={{
                        padding:"16px 20px", borderRadius:12,
                        border:`3px solid ${theme===t.id ? t.accent : "#E0E0E0"}`,
                        background:t.bg, display:"flex", alignItems:"center", gap:14,
                        cursor:"pointer", textAlign:"left",
                      }}>
                        <span style={{ fontSize:28 }}>{t.label.split(" ")[0]}</span>
                        <div style={{ flex:1 }}>
                          <div style={{ fontWeight:700, fontSize:15, color:t.text }}>{t.label.split(" ").slice(1).join(" ")}</div>
                          <div style={{ fontSize:12, color:t.sub, marginTop:2 }}>
                            { t.id==="bright" ? "Clean & modern, easy to read"
                            : t.id==="seoul"  ? "Dark & stylish for trendy spots"
                            :                   "Warm & cozy for traditional places" }
                          </div>
                        </div>
                        {theme===t.id && <span style={{ color:t.accent, fontSize:22 }}>âœ“</span>}
                      </button>
                    ))}
                  </div>
                  <div style={{ display:"flex", gap:10 }}>
                    <button onClick={() => setStep(1)} style={{ ...bigBtn("#F0F0F0","#555"), flex:1 }}>â† Back</button>
                    <button onClick={() => setStep(3)} style={{ ...bigBtn("#E8572A","#fff"), flex:2 }}>Next: Download â†’</button>
                  </div>
                </>}

                {/* STEP 3 */}
                {step===3 && <>
                  <h2 style={{ fontSize:18, marginBottom:8 }}>ğŸ“² Step 3: Download your card!</h2>
                  <p style={{ color:"#666", fontSize:14, lineHeight:1.6, marginBottom:18 }}>
                    Your card is ready! Tap the big button to save it as an image to your phone.
                  </p>
                  <div style={{ background:"#F7FFF9", border:"2px solid #2AAE5A", borderRadius:12, padding:16, marginBottom:20 }}>
                    <div style={{ fontWeight:700, color:"#2AAE5A", marginBottom:8 }}>ğŸ“± How to add it to your video:</div>
                    <div style={{ fontSize:13, color:"#444", lineHeight:2 }}>
                      1. Tap Download below<br/>
                      2. Find it in your Photos app<br/>
                      3. Add as an image/overlay in your video editor!
                    </div>
                  </div>

                  {/* mobile preview toggle */}
                  <button onClick={() => setMP(!mPreview)} style={{ ...bigBtn("#FFF0EC","#E8572A"), marginBottom:12, fontSize:14 }}>
                    {mPreview ? "Hide Preview â–²" : "ğŸ‘ Preview Card â–¼"}
                  </button>
                  {mPreview && (
                    <div style={{ overflowX:"auto", marginBottom:16, borderRadius:12, background:"#eee", padding:12 }}>
                      <div style={{ transform:"scale(0.52)", transformOrigin:"top left", width:540, marginBottom:-138 }}>
                        <Card data={data} theme={theme} cardRef={null} />
                      </div>
                    </div>
                  )}

                  <button onClick={download} disabled={dlding} style={{ ...bigBtn("#2AAE5A","#fff",dlding), marginBottom:12 }}>
                    {dlding ? "â³ Saving..." : "â¬‡ï¸ Download Card Image"}
                  </button>
                  <div style={{ display:"flex", gap:10 }}>
                    <button onClick={() => setStep(2)} style={{ ...bigBtn("#F0F0F0","#555"), flex:1, fontSize:14 }}>â† Style</button>
                    <button onClick={() => {
                      setStep(1);
                      setData(d => ({ ...d, name:"",koreanName:"",description:"",address:"",hours:"",price:"",subway:"",tip:"",rating:"4" }));
                    }} style={{ ...bigBtn("#FFF0EC","#E8572A"), flex:1, fontSize:14 }}>+ New Place</button>
                  </div>
                </>}

              </div>
            </div>

            {/* â”€â”€ live preview (desktop) â”€â”€ */}
            <div className="desktop-preview" style={{ flex:1, minWidth:300, position:"sticky", top:20 }}>
              <div style={{ background:"#fff", borderRadius:16, padding:20, boxShadow:"0 4px 20px rgba(0,0,0,0.07)" }}>
                <h3 style={{ fontSize:14, color:"#888", fontWeight:600, marginBottom:14 }}>ğŸ‘€ Live Preview</h3>
                <div style={{ transform:"scale(0.82)", transformOrigin:"top center", marginBottom:-50 }}>
                  <Card data={data} theme={theme} cardRef={cardRef} />
                </div>
              </div>
            </div>

          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
