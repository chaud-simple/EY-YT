<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üá∞üá∑ Korea Travel Card Maker</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;800&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Noto Sans KR','Segoe UI',sans-serif;background:#F7F5F0;min-height:100vh}
    input,textarea,button,select{font-family:inherit}
    input,textarea{width:100%;padding:12px 14px;border-radius:10px;border:2px solid #E8E8E8;font-size:15px;background:#fff;transition:border-color .2s}
    input:focus,textarea:focus{border-color:#E8572A;outline:none}
    textarea{resize:vertical;min-height:72px}
    .panel{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 20px rgba(0,0,0,.07);margin-bottom:16px}
    label{display:block;font-size:13px;font-weight:700;color:#444;margin-bottom:6px}
    .field{margin-bottom:16px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px}
    .btn{display:block;width:100%;padding:14px 20px;border-radius:12px;border:none;font-size:16px;font-weight:700;cursor:pointer;text-align:center;transition:opacity .2s}
    .btn:active{opacity:.8}
    .btn-orange{background:#E8572A;color:#fff}
    .btn-blue{background:#2A6EE8;color:#fff}
    .btn-green{background:#2AAE5A;color:#fff}
    .btn-gray{background:#F0F0F0;color:#555}
    .btn-light{background:#FFF0EC;color:#E8572A}
    .btn:disabled{background:#ccc;cursor:not-allowed}
    .btn-row{display:flex;gap:10px}
    .btn-row .btn{flex:1}
    .step-tabs{display:flex;justify-content:center;padding:18px 16px 0;margin-bottom:20px}
    .tab{padding:8px 14px;border-radius:20px;font-size:13px;font-weight:700;cursor:pointer;white-space:nowrap}
    .tab-line{width:16px;height:2px;background:#E0E0E0;align-self:center}
    .tab-line.done{background:#2AAE5A}
    .cat-btn{padding:8px 14px;border-radius:20px;border:2px solid #E0E0E0;background:#fff;color:#555;font-size:13px;font-weight:600;cursor:pointer;margin:0 6px 6px 0}
    .cat-btn.active{color:#fff}
    .star-btn{width:44px;height:44px;border-radius:10px;border:2px solid #E0E0E0;background:#fff;font-size:22px;cursor:pointer}
    .star-btn.active{border-color:#FFB800;background:#FFF8E1}
    .theme-btn{padding:16px 20px;border-radius:12px;border:3px solid #E0E0E0;display:flex;align-items:center;gap:14px;cursor:pointer;width:100%;margin-bottom:12px;text-align:left}
    .tip-box{background:#F7FFF9;border:2px solid #2AAE5A;border-radius:12px;padding:16px;margin-bottom:20px;font-size:13px;color:#444;line-height:2}
    .tip-title{font-weight:700;color:#2AAE5A;margin-bottom:8px}
    #card{width:540px;min-height:300px;border-radius:20px;overflow:hidden;font-family:'Noto Sans KR','Segoe UI',sans-serif;box-shadow:0 20px 60px rgba(0,0,0,.25)}
    #card-header{padding:22px 28px 18px}
    #card-badge{display:inline-block;background:rgba(255,255,255,.25);color:#fff;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;padding:4px 12px;border-radius:20px;margin-bottom:8px}
    #card-name{color:#fff;font-size:26px;font-weight:800;margin:0 0 4px;line-height:1.2;text-shadow:0 2px 8px rgba(0,0,0,.2)}
    #card-korean{color:rgba(255,255,255,.8);font-size:15px;margin:0}
    #card-body{padding:20px 28px 20px}
    #card-desc{font-size:14px;line-height:1.7;margin-bottom:16px;font-style:italic;opacity:.85}
    #card-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px}
    .card-info-label{font-size:10px;font-weight:700;letter-spacing:1.2px;text-transform:uppercase;opacity:.6}
    .card-info-val{font-size:13px;font-weight:500;margin-top:2px}
    #card-tip{border-radius:8px;padding:10px 14px}
    #card-tip-label{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:3px}
    #card-tip-text{font-size:13px;line-height:1.5}
    #card-footer{display:flex;justify-content:space-between;align-items:center;padding:10px 28px}
    #card-channel{font-size:11px;font-weight:600}
    #card-stars{font-size:14px;letter-spacing:1px;color:#FFB800}
    #preview-wrap{transform-origin:top left}
  </style>
</head>
<body>

<div style="background:#E8572A;padding:18px 24px;text-align:center">
  <h1 style="color:#fff;font-size:22px;font-weight:800">üá∞üá∑ Korea Travel Card Maker</h1>
  <p style="color:rgba(255,255,255,.85);font-size:13px;margin-top:4px">Make beautiful info cards for your YouTube videos!</p>
</div>

<div class="step-tabs" id="tabs"></div>

<div style="max-width:700px;margin:0 auto;padding:0 16px 60px">

  <div id="step1">
    <div class="panel">
      <h2 style="font-size:18px;margin-bottom:20px">üìù Step 1: Tell us about the place</h2>
      <div class="field"><label>Category *</label><div id="cat-btns"></div></div>
      <div class="field"><label>Place Name (English) *</label><input id="f-name" type="text" placeholder="e.g. Gyeongbokgung Palace"/></div>
      <div class="field"><label>Korean Name (optional)</label><input id="f-korean" type="text" placeholder="e.g. Í≤ΩÎ≥µÍ∂Å"/></div>
      <div class="field"><label>Your Channel Name</label><input id="f-channel" type="text" placeholder="e.g. Mom's Korea Travel"/></div>
      <div class="field"><label>Description</label><textarea id="f-desc" placeholder="Write something, or use the button below!"></textarea></div>
      <button class="btn btn-blue" id="btn-auto" style="margin-bottom:16px">‚ú® Auto-write description for me!</button>
      <div class="grid2">
        <div><label>üìç Area / Location</label><input id="f-address" placeholder="e.g. Jongno-gu, Seoul"/></div>
        <div><label>üïê Opening Hours</label><input id="f-hours" placeholder="e.g. 9am ‚Äì 6pm"/></div>
        <div><label>üí∞ Price Range</label><input id="f-price" placeholder="e.g. ‚Ç©10,000‚Äì20,000"/></div>
        <div><label>üöá Nearest Subway</label><input id="f-subway" placeholder="e.g. Gyeongbokgung Stn."/></div>
      </div>
      <div class="field"><label>‚ú® Your Personal Tip</label><input id="f-tip" placeholder="e.g. Go early morning to avoid crowds!"/></div>
      <div class="field">
        <label>‚≠ê Your Rating</label>
        <div id="star-btns" style="display:flex;gap:8px"></div>
      </div>
      <button class="btn btn-orange" onclick="goStep(2)" style="margin-top:8px">Next: Pick a Style ‚Üí</button>
    </div>
  </div>

  <div id="step2" style="display:none">
    <div class="panel">
      <h2 style="font-size:18px;margin-bottom:20px">üé® Step 2: Pick a card style</h2>
      <div id="theme-btns"></div>
      <div class="btn-row">
        <button class="btn btn-gray" onclick="goStep(1)">‚Üê Back</button>
        <button class="btn btn-orange" onclick="goStep(3)" style="flex:2">Next: Download ‚Üí</button>
      </div>
    </div>
  </div>

  <div id="step3" style="display:none">
    <div class="panel">
      <h2 style="font-size:18px;margin-bottom:8px">üì≤ Step 3: Download your card!</h2>
      <p style="color:#666;font-size:14px;line-height:1.6;margin-bottom:18px">Your card is ready! Tap the big button to save it.</p>
      <div class="tip-box">
        <div class="tip-title">üì± How to add it to your video:</div>
        1. Tap Download below<br/>2. Find it in your Photos app<br/>3. Add as an image in your video editor!
      </div>
      <div style="overflow:auto;margin-bottom:20px;border-radius:12px;background:#eee;padding:12px" id="preview-container">
        <div id="preview-wrap">
          <div id="card">
            <div id="card-header">
              <div id="card-badge"></div>
              <h2 id="card-name"></h2>
              <p id="card-korean"></p>
            </div>
            <div id="card-body">
              <p id="card-desc"></p>
              <div id="card-grid"></div>
              <div id="card-tip" style="display:none">
                <div id="card-tip-label">‚ú® Tip</div>
                <div id="card-tip-text"></div>
              </div>
            </div>
            <div id="card-footer">
              <span id="card-channel"></span>
              <span id="card-stars"></span>
            </div>
          </div>
        </div>
      </div>
      <button class="btn btn-green" id="btn-dl" style="margin-bottom:12px;font-size:18px;padding:18px">‚¨áÔ∏è Download Card Image</button>
      <div class="btn-row">
        <button class="btn btn-gray" onclick="goStep(2)">‚Üê Style</button>
        <button class="btn btn-light" onclick="newPlace()">+ New Place</button>
      </div>
    </div>
  </div>

</div>

<script>
const CATS=[
  {label:"üçú Restaurant",value:"restaurant",color:"#E8572A"},
  {label:"‚òï Caf√©",value:"cafe",color:"#8B5E3C"},
  {label:"üèØ Attraction",value:"attraction",color:"#2A6EE8"},
  {label:"üõçÔ∏è Shopping",value:"shopping",color:"#9B2AE8"},
  {label:"üå∏ Nature",value:"nature",color:"#2AAE5A"},
  {label:"üç∫ Bar / Night",value:"bar",color:"#1A1A2E"},
];
const THEMES=[
  {id:"bright",emoji:"‚òÄÔ∏è",name:"Bright",bg:"#FFFDF7",text:"#1A1A1A",sub:"#6B6B6B",accent:"#E8572A",desc:"Clean & modern, easy to read"},
  {id:"seoul",emoji:"üåÉ",name:"Seoul Night",bg:"#0D0D1A",text:"#F0F0FF",sub:"#9090B0",accent:"#FF6B9D",desc:"Dark & stylish for trendy spots"},
  {id:"hanok",emoji:"üèòÔ∏è",name:"Hanok",bg:"#F5EFE0",text:"#2C1810",sub:"#7A6355",accent:"#8B4513",desc:"Warm & cozy for traditional places"},
];

var S={category:"restaurant",name:"",korean:"",channel:"",desc:"",address:"",hours:"",price:"",subway:"",tip:"",rating:4,theme:"bright",step:1};

function init(){
  // cats
  var cb=document.getElementById("cat-btns");
  CATS.forEach(function(c){
    var b=document.createElement("button");
    b.className="cat-btn"+(c.value===S.category?" active":"");
    if(c.value===S.category){b.style.background=c.color;b.style.borderColor=c.color;b.style.color="#fff";}
    b.textContent=c.label;
    b.onclick=function(){S.category=c.value;refreshCats();updateCard();};
    cb.appendChild(b);
  });
  // stars
  var sb=document.getElementById("star-btns");
  for(var i=1;i<=5;i++){
    (function(n){
      var b=document.createElement("button");
      b.className="star-btn"+(n<=S.rating?" active":"");
      b.textContent="‚òÖ";
      b.onclick=function(){S.rating=n;refreshStars();updateCard();};
      sb.appendChild(b);
    })(i);
  }
  // themes
  var tb=document.getElementById("theme-btns");
  THEMES.forEach(function(t){
    var b=document.createElement("button");
    b.className="theme-btn";
    b.id="theme-"+t.id;
    b.style.background=t.bg;
    b.style.borderColor=S.theme===t.id?t.accent:"#E0E0E0";
    b.innerHTML='<span style="font-size:28px">'+t.emoji+'</span><div style="flex:1"><div style="font-weight:700;font-size:15px;color:'+t.text+'">'+t.name+'</div><div style="font-size:12px;color:'+t.sub+';margin-top:2px">'+t.desc+'</div></div><span id="tick-'+t.id+'" style="color:'+t.accent+';font-size:22px;display:'+(S.theme===t.id?'block':'none')+'">‚úì</span>';
    b.onclick=function(){S.theme=t.id;refreshThemes();updateCard();};
    tb.appendChild(b);
  });
  // inputs
  [["f-name","name"],["f-korean","korean"],["f-channel","channel"],["f-desc","desc"],["f-address","address"],["f-hours","hours"],["f-price","price"],["f-subway","subway"],["f-tip","tip"]].forEach(function(pair){
    document.getElementById(pair[0]).addEventListener("input",function(e){S[pair[1]]=e.target.value;updateCard();});
  });
  document.getElementById("btn-auto").onclick=autoWrite;
  document.getElementById("btn-dl").onclick=downloadCard;
  renderTabs();updateCard();scalePreview();
  window.addEventListener("resize",scalePreview);
}

function refreshCats(){
  var btns=document.querySelectorAll(".cat-btn");
  btns.forEach(function(b,i){
    var c=CATS[i],on=c.value===S.category;
    b.className="cat-btn"+(on?" active":"");
    b.style.background=on?c.color:"#fff";
    b.style.borderColor=on?c.color:"#E0E0E0";
    b.style.color=on?"#fff":"#555";
  });
}
function refreshStars(){
  document.querySelectorAll(".star-btn").forEach(function(b,i){
    var on=i+1<=S.rating;
    b.className="star-btn"+(on?" active":"");
  });
}
function refreshThemes(){
  THEMES.forEach(function(t){
    var on=t.id===S.theme;
    var el=document.getElementById("theme-"+t.id);
    if(el) el.style.borderColor=on?t.accent:"#E0E0E0";
    var tick=document.getElementById("tick-"+t.id);
    if(tick) tick.style.display=on?"block":"none";
  });
}

function renderTabs(){
  var el=document.getElementById("tabs");
  el.innerHTML="";
  ["1. Fill Info","2. Pick Style","3. Download"].forEach(function(s,i){
    var n=i+1,done=S.step>n,active=S.step===n;
    var tab=document.createElement("div");
    tab.className="tab";
    tab.style.background=active?"#E8572A":done?"#2AAE5A":"#E0E0E0";
    tab.style.color=(active||done)?"#fff":"#888";
    tab.textContent=(done?"‚úì ":"")+s;
    tab.onclick=function(){goStep(n);};
    el.appendChild(tab);
    if(i<2){
      var line=document.createElement("div");
      line.style.cssText="width:16px;height:2px;align-self:center;background:"+(done?"#2AAE5A":"#E0E0E0");
      el.appendChild(line);
    }
  });
}

function goStep(n){
  S.step=n;
  document.getElementById("step1").style.display=n===1?"block":"none";
  document.getElementById("step2").style.display=n===2?"block":"none";
  document.getElementById("step3").style.display=n===3?"block":"none";
  renderTabs();
  if(n===3){updateCard();setTimeout(scalePreview,50);}
  window.scrollTo(0,0);
}

function updateCard(){
  var cat=CATS.find(function(c){return c.value===S.category;})||CATS[0];
  var t=THEMES.find(function(th){return th.id===S.theme;})||THEMES[0];
  document.getElementById("card").style.background=t.bg;
  document.getElementById("card-footer").style.borderTop="1px solid "+(t.id==="seoul"?"rgba(255,255,255,.08)":"rgba(0,0,0,.07)");
  document.getElementById("card-header").style.background=cat.color;
  document.getElementById("card-badge").textContent=cat.label;
  document.getElementById("card-name").textContent=S.name||"Place Name";
  var kor=document.getElementById("card-korean");
  kor.textContent=S.korean;kor.style.display=S.korean?"block":"none";
  var desc=document.getElementById("card-desc");
  desc.textContent=S.desc?'"'+S.desc+'"':"";desc.style.display=S.desc?"block":"none";desc.style.color=t.text;
  document.getElementById("card-body").style.color=t.text;
  var grid=document.getElementById("card-grid");grid.innerHTML="";
  [["üìç Location",S.address],["üïê Hours",S.hours],["üí∞ Price",S.price],["üöá Subway",S.subway]].forEach(function(p){
    if(!p[1])return;
    var d=document.createElement("div");
    d.innerHTML='<div class="card-info-label" style="color:'+t.sub+'">'+p[0]+'</div><div class="card-info-val" style="color:'+t.text+'">'+p[1]+'</div>';
    grid.appendChild(d);
  });
  var tipWrap=document.getElementById("card-tip");
  if(S.tip){
    tipWrap.style.display="block";
    tipWrap.style.background=t.id==="seoul"?"rgba(255,107,157,.12)":t.id==="hanok"?"rgba(139,69,19,.1)":"rgba(232,87,42,.08)";
    tipWrap.style.border="1.5px solid "+cat.color+"55";
    tipWrap.style.borderLeft="4px solid "+cat.color;
    document.getElementById("card-tip-label").style.color=cat.color;
    document.getElementById("card-tip-text").textContent=S.tip;
    document.getElementById("card-tip-text").style.color=t.text;
  } else {tipWrap.style.display="none";}
  document.getElementById("card-channel").textContent=S.channel||"Korea Travel Vlog";
  document.getElementById("card-channel").style.color=t.sub;
  document.getElementById("card-stars").textContent="‚òÖ".repeat(S.rating)+"‚òÜ".repeat(5-S.rating);
}

function scalePreview(){
  var wrap=document.getElementById("preview-wrap");
  var cont=document.getElementById("preview-container");
  if(!wrap||!cont)return;
  var avail=cont.clientWidth-24;
  var scale=Math.min(1,avail/540);
  wrap.style.transform="scale("+scale+")";
  wrap.style.transformOrigin="top left";
  wrap.style.width="540px";
  cont.style.height=Math.round(document.getElementById("card").offsetHeight*scale+24)+"px";
}

async function autoWrite(){
  if(!S.name){alert("Please enter a place name first!");return;}
  var btn=document.getElementById("btn-auto");
  btn.disabled=true;btn.textContent="‚ú® Writing...";
  try{
    var res=await fetch("https://api.anthropic.com/v1/messages",{
      method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:200,
        messages:[{role:"user",content:"Write a SHORT, warm, inviting 1-2 sentence English description for a Korean travel YouTube info card.\nPlace: "+S.name+(S.korean?" ("+S.korean+")":"")+"\nType: "+S.category+(S.tip?"\nNotes: "+S.tip:"")+"\nUnder 30 words. No hashtags. First-person tone like you visited."}]})
    });
    var j=await res.json();
    var txt=j.content&&j.content[0]&&j.content[0].text?j.content[0].text.trim().replace(/^["']|["']$/g,""):"";
    if(txt){S.desc=txt;document.getElementById("f-desc").value=txt;updateCard();}
  }catch(e){alert("Couldn't auto-write right now. Check your internet!");}
  btn.disabled=false;btn.textContent="‚ú® Auto-write description for me!";
}

async function downloadCard(){
  var btn=document.getElementById("btn-dl");
  btn.disabled=true;btn.textContent="‚è≥ Saving...";
  var wrap=document.getElementById("preview-wrap");
  var old=wrap.style.transform;
  wrap.style.transform="scale(1)";
  document.getElementById("preview-container").style.height="auto";
  try{
    var canvas=await html2canvas(document.getElementById("card"),{scale:3,backgroundColor:null,useCORS:true,logging:false});
    var a=document.createElement("a");
    a.download=(S.name||"card").replace(/\s+/g,"-")+".png";
    a.href=canvas.toDataURL("image/png");
    a.click();
  }catch(e){alert("Download failed, please try again!");}
  wrap.style.transform=old;scalePreview();
  btn.disabled=false;btn.textContent="‚¨áÔ∏è Download Card Image";
}

function newPlace(){
  ["f-name","f-korean","f-desc","f-address","f-hours","f-price","f-subway","f-tip"].forEach(function(id){document.getElementById(id).value="";});
  S.name="";S.korean="";S.desc="";S.address="";S.hours="";S.price="";S.subway="";S.tip="";S.rating=4;
  refreshStars();updateCard();goStep(1);
}

init();
</script>
</body>
</html>
